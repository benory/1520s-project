#!/usr/bin/env perl

use strict;

my $notecount = `which notecount`;
chomp $notecount;
die "First install Humdrum Extras to use notecount tool." if $notecount =~ /^\s*$/;

my @input = <>;

for (my $i=0; $i<@input; $i++) {
	my $line = $input[$i];
	chomp $line;
	if ($line !~ /^([A-Z][a-z][a-z])(\d{4}[^-]*)/) {
		print "$line\n";
		next;
	}
	my $composer = $1;
	my $number = $2;
	my @files = glob("humdrum/$composer/$composer$number-*.krn");
	if (@files > 1) {
		die "Error: duplicate IDs for ", join(" ", @files), "\n";
	}
	if (@files == 0) {
		print "\n";
		next;
	}
	my $count = `notecount -s humdrum/$composer/$composer$number-*.krn`;
	chomp $count;
	$count !~ s/^\s+//;
	$count !~ s/\s+.*//;
	print "$count\n";
}



